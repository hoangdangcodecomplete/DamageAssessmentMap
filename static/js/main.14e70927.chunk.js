(this["webpackJsonpreact-leaflet-draw-only-one-shape"]=this["webpackJsonpreact-leaflet-draw-only-one-shape"]||[]).push([[0],{177:function(e,t,a){e.exports=a(266)},183:function(e,t,a){},259:function(e,t,a){e.exports=a.p+"static/media/engineer.f8a39b5d.svg"},266:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),l=a(36),r=a.n(l),c=(a(182),a(183),a(73)),i=a(140),u=a(46),s=a(52),m=a.n(s),f=a(89),p=a(13),d=a(146),g=a(147),E=a(149),b=a(150),h=a(148),v=a(144),O=a(145),y=(a(142),a(184),a(185),a(170)),j=a(163),C=a.n(j),S=a(164),k=a(268),w=a(269),L=a(70),T=function(e){var t=e.onStopMoving,a=e.onStartMoving,n=e.isTouchCheck,l=e.onShow;return o.a.createElement(k.a,{gutter:[8,8]},n&&o.a.createElement(w.a,null,o.a.createElement(L.a,{type:"primary",shape:"round",onClick:a},"Check")),o.a.createElement(w.a,null,o.a.createElement(L.a,{type:"primary",shape:"round",onClick:a},"Start moving")),o.a.createElement(w.a,null,o.a.createElement(L.a,{type:"primary",shape:"round",danger:!0,onClick:t},"Stop moving")),o.a.createElement(w.a,null,o.a.createElement(L.a,{shape:"round",onClick:l},"Get my location")))},A=a(274),x=a(273),I=a(275),M=a(270),P=a(277),z=function(e){var t=e.isModalVisible,a=e.iniStyle,l=e.onCancel,r=e.onChangeStyle,c=Object(n.useState)(!1),i=Object(u.a)(c,2),s=i[0],m=i[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(A.a,{title:"Choose Options",visible:t,onCancel:l,footer:!1},o.a.createElement(x.a,{name:"basic",labelCol:{span:8},wrapperCol:{span:16},onFinish:function(e){r(e)},autoComplete:"off",initialValues:a},o.a.createElement(x.a.Item,{label:"Color",name:"color"},o.a.createElement(I.a.Group,null,o.a.createElement(I.a,{value:"#ff0000"},"Red"),o.a.createElement(I.a,{value:"#52c41a"},"Green"),o.a.createElement(I.a,{value:"#0059ff"},"Blue"),o.a.createElement(I.a,{value:"#faad14"},"Yeallow"))),o.a.createElement(x.a.Item,{label:"Action",name:"action"},o.a.createElement(I.a.Group,{onChange:function(e){m(e.target.value)}},o.a.createElement(I.a,{value:!0},"Touch"),o.a.createElement(I.a,{value:!1},"Set time"))),!s&&o.a.createElement(x.a.Item,{label:"Time check",name:"time"},o.a.createElement(M.a,{showNow:!1,format:"mm:ss"})),o.a.createElement(x.a.Item,{wrapperCol:{offset:{sm:24,md:8,lg:6},span:16}},o.a.createElement(P.b,null,o.a.createElement(L.a,{onClick:l},"Cancle"),o.a.createElement(L.a,{type:"primary",htmlType:"submit"},"Submit"))))))},N=a(9),G=a.n(N),_=G.a.icon({iconSize:[25,41],iconAnchor:[10,41],popupAnchor:[2,-40],iconUrl:"https://unpkg.com/leaflet@1.6/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.6/dist/images/marker-shadow.png"}),F=new G.a.Icon({iconUrl:a(259),iconSize:[37,45],iconAnchor:[17,46],popupAnchor:[2,-40]});var J=function(){var e=Object(n.useState)({loaded:!1,coordinates:{lat:"",lng:""}}),t=Object(u.a)(e,2),a=t[0],o=t[1],l=function(e){o({loaded:!0,coordinates:{lat:e.coords.latitude,lng:e.coords.longitude}})},r=function(e){o({loaded:!0,error:{code:e.code,message:e.message}})};return Object(n.useEffect)((function(){"geolocation"in navigator||r({code:0,message:"Geolocation not supported"}),navigator.geolocation.getCurrentPosition(l,r)}),[]),a},R=a(276),U=a(272),B=a(271),Y=a(278),D=R.a.Panel,V=function(e){var t=e.listPosition,a=e.onSetMarkerChecker,n=e.onUpdateListPosition;if(!t||t.length<=0)return o.a.createElement(o.a.Fragment,null);return o.a.createElement(o.a.Fragment,null,t.map((function(e,l){return o.a.createElement(R.a,{key:l+e.id,index:l,className:"fomat-collapsed"},o.a.createElement(D,{header:"This is position ".concat(e.id)},o.a.createElement(U.b,{bordered:!0,dataSource:e.latlngs,renderItem:function(l,r){return o.a.createElement(U.b.Item,{key:r},o.a.createElement(k.a,{justify:"space-between"},o.a.createElement(w.a,{onClick:function(){return a(l)}},o.a.createElement(B.a.Text,{mark:!0},"Location ",r+1,":"," ",JSON.stringify(l))),o.a.createElement(w.a,null,o.a.createElement(L.a,{type:"primary",icon:o.a.createElement(Y.a,{onClick:function(){return function(e,a){var o=[];Object(f.map)(t,(function(t){t.id===a&&(t=Object(c.a)(Object(c.a)({},t),{},{latlngs:Object(f.filter)(t.latlngs,(function(t){return t.lat!==e.lat}))})),o.push(t)})),n(o)}(l,e.id)}}),size:"small"}))))}})))})))};var Z=function(e){var t=e.onChangeColorDraw,a=e.colorSelect;return o.a.createElement(w.a,{className:"col-choose-color-draw"},o.a.createElement(B.a.Text,null,"Choose color for draw line "),o.a.createElement(I.a.Group,{onChange:t,value:a},o.a.createElement(I.a,{value:"red"},"Red"),o.a.createElement(I.a,{value:"blue"},"Blue"),o.a.createElement(I.a,{value:"green"},"Green"),o.a.createElement(I.a,{value:"black"},"Black")))},q=Object(p.d)(C.a),H=function(){var e=J(),t=Object(S.usePosition)(),a=t.latitude,l=t.longitude,r=t.error,s=Object(n.useState)({lat:51.51,lng:-.06}),p=Object(u.a)(s,2),j=p[0],C=p[1],L=Object(n.useState)([]),A=Object(u.a)(L,2),x=A[0],I=A[1],M=Object(n.useState)(0),P=Object(u.a)(M,2),N=P[0],G=P[1],R=Object(n.useState)(!1),U=Object(u.a)(R,2),B=U[0],Y=U[1],D=Object(n.useState)([]),H=Object(u.a)(D,2),K=H[0],Q=H[1],W=Object(n.useState)(!1),X=Object(u.a)(W,2),$=X[0],ee=X[1],te=Object(n.useState)({color:"#ff0000",time:m()("00:10","mm:ss"),action:!1}),ae=Object(u.a)(te,2),ne=ae[0],oe=ae[1],le=Object(n.useState)({}),re=Object(u.a)(le,2),ce=re[0],ie=re[1],ue=Object(n.useState)("red"),se=Object(u.a)(ue,2),me=se[0],fe=se[1],pe=Object(n.useRef)(),de=Object(n.useRef)(),ge=Object(n.useRef)();Object(n.useEffect)((function(){var e=1e3*function(e){var t=e.split(":"),a=Object(u.a)(t,2),n=a[0],o=a[1];return 60*Number(n)+Number(o)}(m()(ne.time).format("mm:ss"));return"number"===typeof N&&B&&!ne.action&&(ge.current=setTimeout((function(){G((function(e){return e+1e4}))}),e)),function(){clearTimeout(ge.current)}})),Object(n.useEffect)((function(){if(a&&l&&!r){if(console.log("latitude",a),console.log("longitude",l),console.log("count",N),!B)return;Q([{lat:a,lng:l}].concat(Object(i.a)(K)))}}),[N,B]),Object(n.useEffect)((function(){e.loaded&&e.error||C({lat:e.coordinates.lat,lng:e.coordinates.lng})}),[e]);var Ee=Object(n.useCallback)((function(e){ie(e)}),[ce]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(d.a,{center:{lat:51.51,lng:-.06},zoom:20,ref:pe,style:{height:"50vh"}},o.a.createElement(g.a,{position:j,icon:_},o.a.createElement(E.a,null,"You are here.")),ce&&!Object(f.isEmpty)(ce)&&o.a.createElement(g.a,{position:ce,icon:F},o.a.createElement(E.a,null,"You are here.",o.a.createElement("input",{type:"file",id:"myfile",name:"myfile",onChange:function(e){return console.log(e.target.value)}}))),o.a.createElement(b.a,{url:"https://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}",maxZoom:20,subdomains:["mt1","mt2","mt3"]}),o.a.createElement(h.a,{color:ne.color,positions:K}),K&&K.length>0&&K.map((function(e,t){return JSON.stringify(e)!==JSON.stringify(j)&&o.a.createElement(v.a,{key:t,center:e,fill:!0,color:ne.color,radius:3},o.a.createElement(E.a,null,o.a.createElement("b",null,"lat:")," ",null===e||void 0===e?void 0:e.lat," ",o.a.createElement("br",null),o.a.createElement("b",null,"lng:")," ",null===e||void 0===e?void 0:e.lng," ",o.a.createElement("br",null)))})),x&&x.length>0&&x.map((function(e){return e.latlngs.map((function(e,t){return o.a.createElement(v.a,{key:t,center:e,fill:!0,color:"#ff0000",radius:3},o.a.createElement(E.a,null,"You are here.",o.a.createElement("input",{type:"file",id:"myfile",name:"myfile",onChange:function(e){return console.log(e.target.value)}})))}))})),o.a.createElement(q,{ref:de,position:"topleft",sizeModes:["Current","A4Portrait","A4Landscape"],hideControlContainer:!1}),o.a.createElement(q,{position:"topleft",sizeModes:["Current","A4Portrait","A4Landscape"],hideControlContainer:!1,title:"Export as PNG",exportOnly:!0}),o.a.createElement(O.a,null,o.a.createElement(y.a,{position:"topright",onCreated:function(e){var t=e.layerType,a=e.layer;if("polygon"===t){var n=a._leaflet_id;console.log(a.getLatLngs()),I((function(e){return[].concat(Object(i.a)(e),[{id:n,latlngs:a.getLatLngs()[0]}])}))}},onEdited:function(e){var t=e.layers._layers;Object.values(t).map((function(e){var t=e._leaflet_id,a=e.editing;return I((function(e){return e.map((function(e){return e.id===t?Object(c.a)(Object(c.a)({},e),{},{latlngs:Object(c.a)({},a.latlngs[0])}):e}))}))}))},onDeleted:function(e){var t=e.layers._layers;Object.values(t).map((function(e){var t=e._leaflet_id;return I((function(e){return e.filter((function(e){return e.id!==t}))}))}))},draw:{polyline:{shapeOptions:{color:me},allowIntersection:!1,showLength:!0,metric:!1,feet:!1},polygon:{allowIntersection:!1,shapeOptions:{color:me},edit:!1,showLength:!0,metric:!1,feet:!1,showArea:!0},rectangle:{shapeOptions:{color:me},showLength:!0,metric:!1,feet:!1,showArea:!0},circle:{shapeOptions:{color:me},showLength:!0,metric:!1,feet:!1,showArea:!0},marker:{zIndexOffset:"999",edit:!0,icon:_}}}))),o.a.createElement(k.a,null,o.a.createElement(w.a,{span:12},o.a.createElement(V,{listPosition:x,onSetMarkerChecker:Ee,onUpdateListPosition:function(e){I(e)}})),o.a.createElement(w.a,{span:12},o.a.createElement(T,{onStopMoving:function(){alert("Stop moving!"),clearTimeout(ge.current)},onStartMoving:function(){ee(!0)},onShow:function(){e.loaded&&!e.error?(pe.current.leafletElement.flyTo([e.coordinates.lat,e.coordinates.lng],20,{animate:!0}),C({lat:e.coordinates.lat,lng:e.coordinates.lng})):alert(e.error.message)},isTouchCheck:ne.action}),o.a.createElement(Z,{onChangeColorDraw:function(e){console.log("e.target.value: "+e.target.value),fe(e.target.value)},colorSelect:me}))),o.a.createElement(z,{isModalVisible:$,onCancel:function(){ee(!1)},iniStyle:ne,onChangeStyle:function(e){oe(e),ee(!1),Y(!0)}}))},K=function(){return o.a.createElement(H,null)},Q=document.getElementById("root");r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(K,null)),Q)}},[[177,1,2]]]);
//# sourceMappingURL=main.14e70927.chunk.js.map