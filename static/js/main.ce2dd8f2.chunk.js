(this["webpackJsonpreact-leaflet-draw-only-one-shape"]=this["webpackJsonpreact-leaflet-draw-only-one-shape"]||[]).push([[0],{157:function(e,t,n){e.exports=n(240)},163:function(e,t,n){},239:function(e,t,n){e.exports=n.p+"static/media/engineer.f8a39b5d.svg"},240:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),l=n(28),r=n.n(l),c=(n(162),n(163),n(111)),i=n(120),u=n(42),s=n(46),m=n.n(s),f=n(11),g=n(126),d=n(127),p=n(129),b=n(130),E=n(128),v=n(124),h=n(125),y=(n(122),n(164),n(165),n(153)),O=n(144),j=n.n(O),C=n(145),S=function(e){var t=e.mapLayers,n=e.onStopMoving,a=e.onStartMoving,l=e.isTouchCheck,r=e.onShow;return o.a.createElement("div",{className:"row-info"},o.a.createElement("pre",{className:"text-left"},JSON.stringify(t,0,2)),o.a.createElement("div",null,o.a.createElement("button",{type:"submit",className:"button-get-location button-unmove",onClick:n},"Stop moving"),o.a.createElement("button",{type:"submit",className:"button-get-location button-moving",onClick:a},"Start moving"),l&&o.a.createElement("button",{type:"submit",className:"button-get-location button-moving",onClick:a},"Check"),o.a.createElement("button",{type:"submit",className:"button-get-location",onClick:r},"Get my location")))},k=n(244),w=n(243),N=n(245),M=n(242),T=n(246),A=n(59),x=function(e){var t=e.isModalVisible,n=e.iniStyle,l=e.onCancel,r=e.onChangeStyle,c=Object(a.useState)(!1),i=Object(u.a)(c,2),s=i[0],m=i[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(k.a,{title:"Choose Options",visible:t,onCancel:l,footer:!1},o.a.createElement(w.a,{name:"basic",labelCol:{span:8},wrapperCol:{span:16},onFinish:function(e){r(e)},autoComplete:"off",initialValues:n},o.a.createElement(w.a.Item,{label:"Color",name:"color"},o.a.createElement(N.a.Group,null,o.a.createElement(N.a,{value:"#ff0000"},"Red"),o.a.createElement(N.a,{value:"#52c41a"},"Green"),o.a.createElement(N.a,{value:"#0059ff"},"Blue"),o.a.createElement(N.a,{value:"#faad14"},"Yeallow"))),o.a.createElement(w.a.Item,{label:"Action",name:"action"},o.a.createElement(N.a.Group,{onChange:function(e){m(e.target.value)}},o.a.createElement(N.a,{value:!0},"Touch"),o.a.createElement(N.a,{value:!1},"Set time"))),!s&&o.a.createElement(w.a.Item,{label:"Time check",name:"time"},o.a.createElement(M.a,{showNow:!1,format:"mm:ss"})),o.a.createElement(w.a.Item,{wrapperCol:{offset:{sm:24,md:8,lg:6},span:16}},o.a.createElement(T.b,null,o.a.createElement(A.a,{onClick:l},"Cancle"),o.a.createElement(A.a,{type:"primary",htmlType:"submit"},"Submit"))))))},_=n(7),z=n.n(_),G=z.a.icon({iconSize:[25,41],iconAnchor:[10,41],popupAnchor:[2,-40],iconUrl:"https://unpkg.com/leaflet@1.6/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.6/dist/images/marker-shadow.png"}),I=new z.a.Icon({iconUrl:n(239),iconSize:[37,45],iconAnchor:[17,46],popupAnchor:[2,-40]});var L=function(){var e=Object(a.useState)({loaded:!1,coordinates:{lat:"",lng:""}}),t=Object(u.a)(e,2),n=t[0],o=t[1],l=function(e){o({loaded:!0,coordinates:{lat:e.coords.latitude,lng:e.coords.longitude}})},r=function(e){o({loaded:!0,error:{code:e.code,message:e.message}})};return Object(a.useEffect)((function(){"geolocation"in navigator||r({code:0,message:"Geolocation not supported"}),navigator.geolocation.getCurrentPosition(l,r)}),[]),n},J=Object(f.d)(j.a),P=function(){var e=L(),t=Object(C.usePosition)(),n=t.latitude,l=t.longitude,r=t.error,s=Object(a.useState)({lat:51.51,lng:-.06}),f=Object(u.a)(s,2),O=f[0],j=f[1],k=Object(a.useState)([]),w=Object(u.a)(k,2),N=w[0],M=w[1],T=Object(a.useState)(0),A=Object(u.a)(T,2),_=A[0],z=A[1],P=Object(a.useState)(!1),R=Object(u.a)(P,2),U=R[0],V=R[1],Y=Object(a.useState)([]),B=Object(u.a)(Y,2),F=B[0],D=B[1],Z=Object(a.useState)(!1),q=Object(u.a)(Z,2),H=q[0],K=q[1],Q=Object(a.useState)({color:"#ff0000",time:m()("00:10","mm:ss"),action:!1}),W=Object(u.a)(Q,2),X=W[0],$=W[1],ee=Object(a.useRef)(),te=Object(a.useRef)(),ne=Object(a.useRef)();Object(a.useEffect)((function(){var e=1e3*function(e){var t=e.split(":"),n=Object(u.a)(t,2),a=n[0],o=n[1];return 60*Number(a)+Number(o)}(m()(X.time).format("mm:ss"));return console.log("timeCheck",e),"number"===typeof _&&U&&!X.action&&(ne.current=setTimeout((function(){z((function(e){return e+1e4}))}),e)),function(){clearTimeout(ne.current)}})),Object(a.useEffect)((function(){if(n&&l&&!r){if(console.log("latitude",n),console.log("longitude",l),console.log("count",_),!U)return;D([{lat:n,lng:l}].concat(Object(i.a)(F)))}}),[_,U]),Object(a.useEffect)((function(){e.loaded&&e.error||j({lat:e.coordinates.lat,lng:e.coordinates.lng})}),[e]);return console.log("locationMoving",F),o.a.createElement("div",null,o.a.createElement(g.a,{center:{lat:51.51,lng:-.06},zoom:16,ref:ee,style:{height:"50vh"}},o.a.createElement(d.a,{position:O,icon:G},o.a.createElement(p.a,null,"You are here.")),o.a.createElement(b.a,{url:"https://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}",maxZoom:20,subdomains:["mt1","mt2","mt3"]}),o.a.createElement(E.a,{color:X.color,positions:F}),F&&F.length>0&&F.map((function(e,t){return JSON.stringify(e)!==JSON.stringify(O)&&o.a.createElement(v.a,{key:t,center:e,fill:!0,color:X.color,radius:3},o.a.createElement(p.a,null,o.a.createElement("b",null,"lat:")," ",null===e||void 0===e?void 0:e.lat," ",o.a.createElement("br",null),o.a.createElement("b",null,"lng:")," ",null===e||void 0===e?void 0:e.lng," ",o.a.createElement("br",null)))})),N&&N.length>0&&N.map((function(e){return e.latlngs.map((function(e,t){return o.a.createElement(d.a,{key:t,position:e,icon:I},o.a.createElement(p.a,null,"You are here.",o.a.createElement("input",{type:"file",id:"myfile",name:"myfile",onChange:function(e){return console.log(e.target.value)}})))}))})),o.a.createElement(J,{ref:te,position:"topleft",sizeModes:["Current","A4Portrait","A4Landscape"],hideControlContainer:!1}),o.a.createElement(J,{position:"topleft",sizeModes:["Current","A4Portrait","A4Landscape"],hideControlContainer:!1,title:"Export as PNG",exportOnly:!0}),o.a.createElement(h.a,null,o.a.createElement(y.a,{position:"topright",onCreated:function(e){console.log(e);var t=e.layerType,n=e.layer;if("polygon"===t){var a=n._leaflet_id;M((function(e){return[].concat(Object(i.a)(e),[{id:a,latlngs:n.getLatLngs()[0]}])}))}},onEdited:function(e){console.log(e);var t=e.layers._layers;Object.values(t).map((function(e){var t=e._leaflet_id,n=e.editing;return M((function(e){return e.map((function(e){return e.id===t?Object(c.a)(Object(c.a)({},e),{},{latlngs:Object(c.a)({},n.latlngs[0])}):e}))}))}))},onDeleted:function(e){console.log(e);var t=e.layers._layers;Object.values(t).map((function(e){var t=e._leaflet_id;return M((function(e){return e.filter((function(e){return e.id!==t}))}))}))},draw:{rectangle:!0,polyline:!0,circle:!1,circlemarker:!1,marker:!1}}))),o.a.createElement(S,{mapLayers:N,onStopMoving:function(){alert("Stop moving!"),clearTimeout(ne.current)},onStartMoving:function(){K(!0)},onShow:function(){e.loaded&&!e.error?(ee.current.leafletElement.flyTo([e.coordinates.lat,e.coordinates.lng],16,{animate:!0}),j({lat:e.coordinates.lat,lng:e.coordinates.lng})):alert(e.error.message)},isTouchCheck:X.action}),o.a.createElement(x,{isModalVisible:H,onCancel:function(){K(!1)},iniStyle:X,onChangeStyle:function(e){$(e),K(!1),V(!0)}}))},R=function(){return o.a.createElement(P,null)},U=document.getElementById("root");r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(R,null)),U)}},[[157,1,2]]]);
//# sourceMappingURL=main.ce2dd8f2.chunk.js.map