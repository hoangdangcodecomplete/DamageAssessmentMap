(this["webpackJsonpreact-leaflet-draw-only-one-shape"]=this["webpackJsonpreact-leaflet-draw-only-one-shape"]||[]).push([[0],{181:function(e,t,a){e.exports=a(274)},187:function(e,t,a){},270:function(e,t,a){e.exports=a.p+"static/media/engineer.f8a39b5d.svg"},274:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),l=a(32),r=a.n(l),c=(a(186),a(187),a(59)),i=a(85),u=a(34),s=a(287),m=a(283),f=a(277),p=a(60),d=a(276),g=a(142),E=a(53),b=a.n(E),h=a(13),O=a(149),j=a(150),v=a(152),y=a(153),C=a(151),S=a(147),k=(a(146),a(188),a(189),a(136)),w=a.n(k),T=a(166),x=a.n(T),N=(a(192),a(167)),I=function(e){var t=e.onStopMoving,a=e.onStartMoving,n=e.isTouchCheck,l=e.onShow,r=e.onTouchCheckPoint;return o.a.createElement(o.a.Fragment,null,n&&o.a.createElement(d.a,null,o.a.createElement(p.a,{type:"primary",shape:"round",onClick:r},"Check")),o.a.createElement(d.a,null,o.a.createElement(p.a,{type:"primary",shape:"round",onClick:a},"Start moving")),o.a.createElement(d.a,null,o.a.createElement(p.a,{type:"primary",shape:"round",danger:!0,onClick:t},"Stop moving")),o.a.createElement(d.a,null,o.a.createElement(p.a,{shape:"round",onClick:l},"Get my location")))},M=a(148),P=a(174),_=function(e){var t=e.onCreate,a=e.onEdited,n=e.onDeleted,l=e.onEditVertex,r=e.colorDraw;return o.a.createElement(M.a,null,o.a.createElement(P.a,{position:"topright",onCreated:t,onEdited:a,onDeleted:n,onEditVertex:l,draw:{polyline:{shapeOptions:{color:r},allowIntersection:!1,showLength:!0,metric:!1,feet:!1},polygon:{allowIntersection:!1,shapeOptions:{color:r},edit:!1,showLength:!0,metric:!1,feet:!1,showArea:!0},rectangle:!1,circle:!1,circlemarker:!1,marker:!1}}))},L=a(284),A=a(279),G=a(280),D=L.a.Panel,z=function(e){var t=e.listPosition,a=e.onSetMarkerChecker;return!t||t.length<=0?o.a.createElement(o.a.Fragment,null):o.a.createElement(o.a.Fragment,null,t.map((function(e,t){return o.a.createElement(L.a,{key:t+e.id,index:t,className:"fomat-collapsed"},o.a.createElement(D,{header:"This is position ".concat(e.id)},o.a.createElement(A.b,{bordered:!0,dataSource:e.latlngs,renderItem:function(e,t){return o.a.createElement(A.b.Item,{key:t},o.a.createElement(f.a,{justify:"space-between"},o.a.createElement(d.a,{onClick:function(){return a(e)}},o.a.createElement(G.a.Text,{mark:!0},"Location ",t+1,":"," ",JSON.stringify(e)))))}})))})))},F=a(282),V=a(281),B=a(285),J=a(278),R=a(286),U=function(e){var t=e.isModalVisible,a=e.iniStyle,l=e.onCancel,r=e.onChangeStyle,c=Object(n.useState)(!1),i=Object(u.a)(c,2),s=i[0],m=i[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(F.a,{title:"Choose Options",visible:t,onCancel:l,footer:!1},o.a.createElement(V.a,{name:"basic",labelCol:{span:8},wrapperCol:{span:16},onFinish:function(e){r(e)},autoComplete:"off",initialValues:a},o.a.createElement(V.a.Item,{label:"Color",name:"color"},o.a.createElement(B.a.Group,null,o.a.createElement(B.a,{value:"#ff0000"},"Red"),o.a.createElement(B.a,{value:"#52c41a"},"Green"),o.a.createElement(B.a,{value:"#0059ff"},"Blue"),o.a.createElement(B.a,{value:"#faad14"},"Yeallow"))),o.a.createElement(V.a.Item,{label:"Action",name:"action"},o.a.createElement(B.a.Group,{onChange:function(e){m(e.target.value)}},o.a.createElement(B.a,{value:!0},"Touch"),o.a.createElement(B.a,{value:!1},"Set time"))),!s&&o.a.createElement(V.a.Item,{label:"Time check",name:"time"},o.a.createElement(J.a,{showNow:!1,format:"mm:ss"})),o.a.createElement(V.a.Item,{wrapperCol:{offset:{sm:24,md:8,lg:6},span:16}},o.a.createElement(R.b,null,o.a.createElement(p.a,{onClick:l},"Cancle"),o.a.createElement(p.a,{type:"primary",htmlType:"submit"},"Submit"))))))};var Y=function(e){var t=e.onChangeColorDraw,a=e.colorSelect;return o.a.createElement(d.a,{className:"col-choose-color-draw"},o.a.createElement(G.a.Text,null,"Choose color for draw line "),o.a.createElement(B.a.Group,{onChange:t,value:a},o.a.createElement(B.a,{value:"red"},"Red"),o.a.createElement(B.a,{value:"blue"},"Blue"),o.a.createElement(B.a,{value:"green"},"Green"),o.a.createElement(B.a,{value:"black"},"Black")))},Z=a(9),q=a.n(Z),H=q.a.icon({iconSize:[25,41],iconAnchor:[10,41],popupAnchor:[2,-40],iconUrl:"https://unpkg.com/leaflet@1.6/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.6/dist/images/marker-shadow.png"}),K=new q.a.Icon({iconUrl:a(270),iconSize:[37,45],iconAnchor:[17,46],popupAnchor:[2,-40]});var Q=function(){var e=Object(n.useState)({loaded:!1,coordinates:{lat:"",lng:""}}),t=Object(u.a)(e,2),a=t[0],o=t[1],l=function(e){o({loaded:!0,coordinates:{lat:e.coords.latitude,lng:e.coords.longitude}})},r=function(e){o({loaded:!0,error:{code:e.code,message:e.message}})};return Object(n.useEffect)((function(){"geolocation"in navigator||r({code:0,message:"Geolocation not supported"}),navigator.geolocation.getCurrentPosition(l,r)}),[]),a};var W=function(){var e=Object(n.useState)(),t=Object(u.a)(e,2),a=t[0],o=t[1];return Object(n.useEffect)((function(){fetch("http://ip-api.com/json").then((function(e){return e.json()})).then((function(e){o(e)}))}),[]),a},X=(a(271),Object(h.d)(x.a)),$=function(){var e=Q(),t=W(),a=Object(N.usePosition)(),l=a.latitude,r=a.longitude,E=a.error,h=Object(n.useState)(),k=Object(u.a)(h,2),T=k[0],x=k[1],M=Object(n.useState)([]),P=Object(u.a)(M,2),L=P[0],A=P[1],G=Object(n.useState)(0),D=Object(u.a)(G,2),F=D[0],V=D[1],B=Object(n.useState)(!1),J=Object(u.a)(B,2),R=J[0],Z=J[1],q=Object(n.useState)([]),$=Object(u.a)(q,2),ee=$[0],te=$[1],ae=Object(n.useState)(!1),ne=Object(u.a)(ae,2),oe=ne[0],le=ne[1],re=Object(n.useState)({color:"#ff0000",time:b()("00:10","mm:ss"),action:!1}),ce=Object(u.a)(re,2),ie=ce[0],ue=ce[1],se=Object(n.useState)({}),me=Object(u.a)(se,2),fe=me[0],pe=me[1],de=Object(n.useState)("red"),ge=Object(u.a)(de,2),Ee=ge[0],be=ge[1],he=Object(n.useState)(null),Oe=Object(u.a)(he,2),je=(Oe[0],Oe[1]),ve=Object(n.useState)(!1),ye=Object(u.a)(ve,2),Ce=ye[0],Se=ye[1],ke=Object(n.useRef)(),we=Object(n.useRef)();Object(n.useEffect)((function(){t&&x({lat:t.lat,lng:t.lon})}),[t]),Object(n.useEffect)((function(){var e=1e3*function(e){var t=e.split(":"),a=Object(u.a)(t,2),n=a[0],o=a[1];return 60*Number(n)+Number(o)}(b()(ie.time).format("mm:ss"));return"number"===typeof F&&R&&!ie.action&&(we.current=setTimeout((function(){V((function(e){return e+1e4}))}),e)),function(){clearTimeout(we.current)}})),Object(n.useEffect)((function(){if(l&&r&&!E){if(console.log("latitude",l),console.log("longitude",r),console.log("count",F),!R)return;var e={lat:l,lng:r};console.log([e].concat(Object(i.a)(ee))),te([e].concat(Object(i.a)(ee)))}}),[F,R]);var Te=function(e){return e.map((function(e){return Object(g.pick)(e,["lat","lng"])}))},xe=Object(n.useCallback)((function(e){pe(e)}),[fe]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(O.a,{center:T,zoom:12,ref:ke,style:{height:"100vh"},fullscreenControl:!0,whenReady:function(e){return je(e.target)}},e.loaded&&!e.error&&o.a.createElement(j.a,{position:[e.coordinates.lat,e.coordinates.lng],icon:H},o.a.createElement(v.a,null,"You are here.")),L&&L.length>0&&L.map((function(e){return e.latlngs.map((function(e){return o.a.createElement(j.a,{position:e,icon:H},o.a.createElement(v.a,null,o.a.createElement(m.a,{placeholder:"Basic usage"}),o.a.createElement("input",{type:"file",id:"myfile",name:"myfile",onChange:function(e){return console.log(e.target.value)}})))}))})),fe&&!Object(g.isEmpty)(fe)&&o.a.createElement(j.a,{position:fe,icon:K},o.a.createElement(v.a,null,"You are here.",o.a.createElement("input",{type:"file",id:"myfile",name:"myfile",onChange:function(e){return console.log(e.target.value)}}))),o.a.createElement(y.a,{url:"https://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}",maxZoom:20,subdomains:["mt1","mt2","mt3"]}),o.a.createElement(C.a,{color:ie.color,positions:ee}),L&&L.length>0&&o.a.createElement(w.a,{position:"topleft"},o.a.createElement(f.a,{className:"control-action list-positions"},o.a.createElement(z,{listPosition:L,onSetMarkerChecker:xe,onUpdateListPosition:function(e){A(e)}}))),o.a.createElement(w.a,{position:"topright"},o.a.createElement(p.a,{onClick:function(){return Se(!Ce)},icon:o.a.createElement(s.a,null),className:"icon-note"})),o.a.createElement(w.a,{position:"bottomright"},o.a.createElement(f.a,{className:"control-action"},o.a.createElement(d.a,null,o.a.createElement(I,{onStopMoving:function(){if(alert("Stop moving!"),ie.action)return ue(Object(c.a)(Object(c.a)({},ie),{},{action:!1}));clearTimeout(we.current)},onStartMoving:function(){le(!0)},onShow:function(){if(e.loaded&&!e.error){var t=e.coordinates,a=t.lat,n=t.lng;ke.current.leafletElement.flyTo([a,n],20,{animate:!0})}else alert(e.error.message)},isTouchCheck:ie.action,onTouchCheckPoint:function(){if(ie.action&&l&&r&&!E)return te([{lat:l,lng:r}].concat(Object(i.a)(ee)))}}),o.a.createElement(Y,{onChangeColorDraw:function(e){be(e.target.value)},colorSelect:Ee})))),ee&&ee.length>0&&ee.map((function(e,t){return JSON.stringify(e)!==JSON.stringify(T)&&o.a.createElement(S.a,{key:t,center:e,fill:!0,color:ie.color,radius:3},o.a.createElement(v.a,null,o.a.createElement("b",null,"lat:")," ",null===e||void 0===e?void 0:e.lat," ",o.a.createElement("br",null),o.a.createElement("b",null,"lng:")," ",null===e||void 0===e?void 0:e.lng," ",o.a.createElement("br",null)))})),o.a.createElement(X,{position:"topleft",sizeModes:["Current","A4Portrait","A4Landscape"],hideControlContainer:!1,title:"Export as PNG",exportOnly:!0}),o.a.createElement(_,{onCreate:function(e){var t=e.layerType,a=e.layer,n=a._leaflet_id;if("polyline"===t)return A((function(e){return[].concat(Object(i.a)(e),[{id:n,latlngs:a.editing.latlngs[0]}])}));"polygon"===t&&(console.log(a.getLatLngs()),A((function(e){return[].concat(Object(i.a)(e),[{id:n,latlngs:a.getLatLngs()[0]}])})))},onEdited:function(e){var t=e.layers._layers;Object.values(t).map((function(e){var t=e._leaflet_id,a=e.editing;console.log(a),A((function(e){return e.map((function(e){return e.id===t?Object(c.a)(Object(c.a)({},e),{},{latlngs:Te(a.latlngs[0][0])}):e}))}))}))},onDeleted:function(e){var t=e.layers._layers;Object.values(t).map((function(e){var t=e._leaflet_id;return A((function(e){return e.filter((function(e){return e.id!==t}))}))}))},onEditVertex:function(e){var t=e.poly;A((function(e){return e.map((function(e){return e.id===t._leaflet_id?Object(c.a)(Object(c.a)({},e),{},{latlngs:Te(t.editing.latlngs[0][0])}):e}))}))},colorDraw:Ee})),o.a.createElement(U,{isModalVisible:oe,onCancel:function(){le(!1)},iniStyle:ie,onChangeStyle:function(e){ue(e),le(!1),e.action||Z(!0)}}))},ee=function(){return o.a.createElement($,null)},te=document.getElementById("root");r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(ee,null)),te)}},[[181,1,2]]]);
//# sourceMappingURL=main.d1291d04.chunk.js.map