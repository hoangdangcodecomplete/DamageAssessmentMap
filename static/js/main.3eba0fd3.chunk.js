(this["webpackJsonpreact-leaflet-draw-only-one-shape"]=this["webpackJsonpreact-leaflet-draw-only-one-shape"]||[]).push([[0],{182:function(e,t,n){e.exports=n(272)},188:function(e,t,n){},270:function(e,t,n){e.exports=n.p+"static/media/message-svgrepo-com.52ecce9f.svg"},271:function(e,t,n){e.exports=n.p+"static/media/engineer.f8a39b5d.svg"},272:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),l=n(36),r=n.n(l),c=(n(187),n(188),n(59)),i=n(72),u=n(32),s=n(280),m=n(274),f=n(60),p=n(273),g=n(85),d=n(53),E=n.n(d),b=n(13),h=n(149),O=n(150),j=n(152),v=n(153),y=n(151),C=n(147),S=n(148),k=(n(146),n(189),n(190),n(137)),w=n.n(k),T=n(174),x=n(167),N=n.n(x),I=n(168),P=function(e){var t=e.onStopMoving,n=e.onStartMoving,a=e.isTouchCheck,l=e.onShow,r=e.onTouchCheckPoint;return o.a.createElement(o.a.Fragment,null,a&&o.a.createElement(p.a,null,o.a.createElement(f.a,{type:"primary",shape:"round",onClick:r},"Check")),o.a.createElement(p.a,null,o.a.createElement(f.a,{type:"primary",shape:"round",onClick:n},"Start moving")),o.a.createElement(p.a,null,o.a.createElement(f.a,{type:"primary",shape:"round",danger:!0,onClick:t},"Stop moving")),o.a.createElement(p.a,null,o.a.createElement(f.a,{shape:"round",onClick:l},"Get my location")))},A=n(281),L=n(276),M=n(277),_=A.a.Panel,G=function(e){var t=e.listPosition,n=e.onSetMarkerChecker;e.onUpdateListPosition;if(!t||t.length<=0)return o.a.createElement(o.a.Fragment,null);return o.a.createElement(o.a.Fragment,null,t.map((function(e,t){return o.a.createElement(A.a,{key:t+e.id,index:t,className:"fomat-collapsed"},o.a.createElement(_,{header:"This is position ".concat(e.id)},o.a.createElement(L.b,{bordered:!0,dataSource:e.latlngs,renderItem:function(e,t){return o.a.createElement(L.b.Item,{key:t},o.a.createElement(m.a,{justify:"space-between"},o.a.createElement(p.a,{onClick:function(){return n(e)}},o.a.createElement(M.a.Text,{mark:!0},"Location ",t+1,":"," ",JSON.stringify(e)))))}})))})))},z=n(279),F=n(278),U=n(282),B=n(275),J=n(283),R=function(e){var t=e.isModalVisible,n=e.iniStyle,l=e.onCancel,r=e.onChangeStyle,c=Object(a.useState)(!1),i=Object(u.a)(c,2),s=i[0],m=i[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(z.a,{title:"Choose Options",visible:t,onCancel:l,footer:!1},o.a.createElement(F.a,{name:"basic",labelCol:{span:8},wrapperCol:{span:16},onFinish:function(e){r(e)},autoComplete:"off",initialValues:n},o.a.createElement(F.a.Item,{label:"Color",name:"color"},o.a.createElement(U.a.Group,null,o.a.createElement(U.a,{value:"#ff0000"},"Red"),o.a.createElement(U.a,{value:"#52c41a"},"Green"),o.a.createElement(U.a,{value:"#0059ff"},"Blue"),o.a.createElement(U.a,{value:"#faad14"},"Yeallow"))),o.a.createElement(F.a.Item,{label:"Action",name:"action"},o.a.createElement(U.a.Group,{onChange:function(e){m(e.target.value)}},o.a.createElement(U.a,{value:!0},"Touch"),o.a.createElement(U.a,{value:!1},"Set time"))),!s&&o.a.createElement(F.a.Item,{label:"Time check",name:"time"},o.a.createElement(B.a,{showNow:!1,format:"mm:ss"})),o.a.createElement(F.a.Item,{wrapperCol:{offset:{sm:24,md:8,lg:6},span:16}},o.a.createElement(J.b,null,o.a.createElement(f.a,{onClick:l},"Cancle"),o.a.createElement(f.a,{type:"primary",htmlType:"submit"},"Submit"))))))};var V=function(e){var t=e.onChangeColorDraw,n=e.colorSelect;return o.a.createElement(p.a,{className:"col-choose-color-draw"},o.a.createElement(M.a.Text,null,"Choose color for draw line "),o.a.createElement(U.a.Group,{onChange:t,value:n},o.a.createElement(U.a,{value:"red"},"Red"),o.a.createElement(U.a,{value:"blue"},"Blue"),o.a.createElement(U.a,{value:"green"},"Green"),o.a.createElement(U.a,{value:"black"},"Black")))},D=n(9),Y=n.n(D),Z=(new Y.a.Icon({iconUrl:n(270),iconSize:[37,45],iconAnchor:[17,46],popupAnchor:[2,-40]}),Y.a.icon({iconSize:[25,41],iconAnchor:[10,41],popupAnchor:[2,-40],iconUrl:"https://unpkg.com/leaflet@1.6/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.6/dist/images/marker-shadow.png"})),q=new Y.a.Icon({iconUrl:n(271),iconSize:[37,45],iconAnchor:[17,46],popupAnchor:[2,-40]});var H=function(){var e=Object(a.useState)({loaded:!1,coordinates:{lat:"",lng:""}}),t=Object(u.a)(e,2),n=t[0],o=t[1],l=function(e){o({loaded:!0,coordinates:{lat:e.coords.latitude,lng:e.coords.longitude}})},r=function(e){o({loaded:!0,error:{code:e.code,message:e.message}})};return Object(a.useEffect)((function(){"geolocation"in navigator||r({code:0,message:"Geolocation not supported"}),navigator.geolocation.getCurrentPosition(l,r)}),[]),n};var K=function(){var e=Object(a.useState)(),t=Object(u.a)(e,2),n=t[0],o=t[1];return Object(a.useEffect)((function(){fetch("http://ip-api.com/json").then((function(e){return e.json()})).then((function(e){o(e)}))}),[]),n},Q=n(284),W=Object(b.d)(N.a),X=function(){var e=H(),t=K(),n=Object(I.usePosition)(),l=n.latitude,r=n.longitude,d=n.error,b=Object(a.useState)({lat:51.51,lng:-.06}),k=Object(u.a)(b,2),x=k[0],N=k[1],A=Object(a.useState)([]),L=Object(u.a)(A,2),M=L[0],_=L[1],z=Object(a.useState)(0),F=Object(u.a)(z,2),U=F[0],B=F[1],J=Object(a.useState)(!1),D=Object(u.a)(J,2),Y=D[0],X=D[1],$=Object(a.useState)([]),ee=Object(u.a)($,2),te=ee[0],ne=ee[1],ae=Object(a.useState)(!1),oe=Object(u.a)(ae,2),le=oe[0],re=oe[1],ce=Object(a.useState)({color:"#ff0000",time:E()("00:10","mm:ss"),action:!1}),ie=Object(u.a)(ce,2),ue=ie[0],se=ie[1],me=Object(a.useState)({}),fe=Object(u.a)(me,2),pe=fe[0],ge=fe[1],de=Object(a.useState)("red"),Ee=Object(u.a)(de,2),be=Ee[0],he=Ee[1],Oe=Object(a.useState)(null),je=Object(u.a)(Oe,2),ve=(je[0],je[1]),ye=Object(a.useState)(!1),Ce=Object(u.a)(ye,2),Se=Ce[0],ke=Ce[1],we=Object(a.useRef)(),Te=Object(a.useRef)();Object(a.useEffect)((function(){t&&N({lat:t.lat,lng:t.lon})}),[t]),Object(a.useEffect)((function(){var e=1e3*function(e){var t=e.split(":"),n=Object(u.a)(t,2),a=n[0],o=n[1];return 60*Number(a)+Number(o)}(E()(ue.time).format("mm:ss"));return"number"===typeof U&&Y&&!ue.action&&(Te.current=setTimeout((function(){B((function(e){return e+1e4}))}),e)),function(){clearTimeout(Te.current)}})),Object(a.useEffect)((function(){if(l&&r&&!d){if(console.log("latitude",l),console.log("longitude",r),console.log("count",U),!Y)return;var e={lat:l,lng:r};console.log([e].concat(Object(i.a)(te))),ne([e].concat(Object(i.a)(te)))}}),[U,Y]),Object(a.useEffect)((function(){e.loaded&&e.error||N({lat:e.coordinates.lat,lng:e.coordinates.lng})}),[e]);var xe=function(e){return e.map((function(e){return Object(g.pick)(e,["lat","lng"])}))},Ne=Object(a.useCallback)((function(e){ge(e)}),[pe]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(h.a,{center:{lat:51.51,lng:-.06},zoom:17,ref:we,style:{height:"100vh"},fullscreenControl:!0,whenReady:function(e){return ve(e.target)}},o.a.createElement(O.a,{position:x,icon:Z},o.a.createElement(j.a,null,"You are here.")),M&&M.length>0&&M.map((function(e){return e.latlngs.map((function(e){return o.a.createElement(O.a,{position:e,icon:Z},o.a.createElement(j.a,null,o.a.createElement(s.a,{placeholder:"Basic usage"}),o.a.createElement("input",{type:"file",id:"myfile",name:"myfile",onChange:function(e){return console.log(e.target.value)}})))}))})),pe&&!Object(g.isEmpty)(pe)&&o.a.createElement(O.a,{position:pe,icon:q},o.a.createElement(j.a,null,"You are here.",o.a.createElement("input",{type:"file",id:"myfile",name:"myfile",onChange:function(e){return console.log(e.target.value)}}))),o.a.createElement(v.a,{url:"https://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}",maxZoom:20,subdomains:["mt1","mt2","mt3"]}),o.a.createElement(y.a,{color:ue.color,positions:te}),M&&M.length>0&&o.a.createElement(w.a,{position:"topleft"},o.a.createElement(m.a,{className:"control-action list-positions"},o.a.createElement(G,{listPosition:M,onSetMarkerChecker:Ne,onUpdateListPosition:function(e){_(e)}}))),o.a.createElement(w.a,{position:"topright"},o.a.createElement(f.a,{onClick:function(){return ke(!Se)},icon:o.a.createElement(Q.a,null),className:"icon-note"})),o.a.createElement(w.a,{position:"bottomright"},o.a.createElement(m.a,{className:"control-action"},o.a.createElement(p.a,null,o.a.createElement(P,{onStopMoving:function(){if(alert("Stop moving!"),ue.action)return se(Object(c.a)(Object(c.a)({},ue),{},{action:!1}));clearTimeout(Te.current)},onStartMoving:function(){re(!0)},onShow:function(){e.loaded&&!e.error?(we.current.leafletElement.flyTo([e.coordinates.lat,e.coordinates.lng],17,{animate:!0}),console.log(e),N({lat:e.coordinates.lat,lng:e.coordinates.lng})):alert(e.error.message)},isTouchCheck:ue.action,onTouchCheckPoint:function(){if(ue.action&&l&&r&&!d)return ne([{lat:l,lng:r}].concat(Object(i.a)(te)))}}),o.a.createElement(V,{onChangeColorDraw:function(e){he(e.target.value)},colorSelect:be})))),te&&te.length>0&&te.map((function(e,t){return JSON.stringify(e)!==JSON.stringify(x)&&o.a.createElement(C.a,{key:t,center:e,fill:!0,color:ue.color,radius:3},o.a.createElement(j.a,null,o.a.createElement("b",null,"lat:")," ",null===e||void 0===e?void 0:e.lat," ",o.a.createElement("br",null),o.a.createElement("b",null,"lng:")," ",null===e||void 0===e?void 0:e.lng," ",o.a.createElement("br",null)))})),o.a.createElement(W,{position:"topleft",sizeModes:["Current","A4Portrait","A4Landscape"],hideControlContainer:!1,title:"Export as PNG",exportOnly:!0}),o.a.createElement(S.a,null,o.a.createElement(T.a,{position:"topright",onCreated:function(e){var t=e.layerType,n=e.layer,a=n._leaflet_id;if("polyline"===t)return _((function(e){return[].concat(Object(i.a)(e),[{id:a,latlngs:n.editing.latlngs[0]}])}));"polygon"===t&&(console.log(n.getLatLngs()),_((function(e){return[].concat(Object(i.a)(e),[{id:a,latlngs:n.getLatLngs()[0]}])})))},onEdited:function(e){var t=e.layers._layers;Object.values(t).map((function(e){var t=e._leaflet_id,n=e.editing;console.log(n),_((function(e){return e.map((function(e){return e.id===t?Object(c.a)(Object(c.a)({},e),{},{latlngs:xe(n.latlngs[0][0])}):e}))}))}))},onDeleted:function(e){var t=e.layers._layers;Object.values(t).map((function(e){var t=e._leaflet_id;return _((function(e){return e.filter((function(e){return e.id!==t}))}))}))},onEditVertex:function(e){var t=e.poly;_((function(e){return e.map((function(e){return e.id===t._leaflet_id?Object(c.a)(Object(c.a)({},e),{},{latlngs:xe(t.editing.latlngs[0][0])}):e}))}))},draw:{polyline:{shapeOptions:{color:be},allowIntersection:!1,showLength:!0,metric:!1,feet:!1},polygon:{allowIntersection:!1,shapeOptions:{color:be},edit:!1,showLength:!0,metric:!1,feet:!1,showArea:!0},rectangle:!1,circle:!1,circlemarker:!1,marker:!1}}))),o.a.createElement(R,{isModalVisible:le,onCancel:function(){re(!1)},iniStyle:ue,onChangeStyle:function(e){se(e),re(!1),e.action||X(!0)}}))},$=function(){return o.a.createElement(X,null)},ee=document.getElementById("root");r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement($,null)),ee)}},[[182,1,2]]]);
//# sourceMappingURL=main.3eba0fd3.chunk.js.map